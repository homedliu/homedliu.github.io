<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="javascript,jQuery," />










<meta name="description" content="众所周知，JS是一种语法极其灵活的语言，一千个人会有一千种JS书写方式。这造成的结果往往就是给项目日后的开发及维护留下一个不小的隐患，也对你和团队再次开发及阅读代码造成一定困难，个人认为良好的书写规范是应该首当其冲的。所以参考一些优秀前端开发团队的代码规范后，总结了几点，希望能让你的Javascript代码上升一个台阶。 变量命名：变量名包括全局变量，局部变量，类变量，函数参数等等，他们都属于这一">
<meta name="keywords" content="javascript,jQuery">
<meta property="og:type" content="article">
<meta property="og:title" content="Javascript代码进化">
<meta property="og:url" content="http://yoursite.com/2016/03/05/js_gf/index.html">
<meta property="og:site_name" content="Homed Blog">
<meta property="og:description" content="众所周知，JS是一种语法极其灵活的语言，一千个人会有一千种JS书写方式。这造成的结果往往就是给项目日后的开发及维护留下一个不小的隐患，也对你和团队再次开发及阅读代码造成一定困难，个人认为良好的书写规范是应该首当其冲的。所以参考一些优秀前端开发团队的代码规范后，总结了几点，希望能让你的Javascript代码上升一个台阶。 变量命名：变量名包括全局变量，局部变量，类变量，函数参数等等，他们都属于这一">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-10-18T15:03:02.421Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Javascript代码进化">
<meta name="twitter:description" content="众所周知，JS是一种语法极其灵活的语言，一千个人会有一千种JS书写方式。这造成的结果往往就是给项目日后的开发及维护留下一个不小的隐患，也对你和团队再次开发及阅读代码造成一定困难，个人认为良好的书写规范是应该首当其冲的。所以参考一些优秀前端开发团队的代码规范后，总结了几点，希望能让你的Javascript代码上升一个台阶。 变量命名：变量名包括全局变量，局部变量，类变量，函数参数等等，他们都属于这一">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/03/05/js_gf/"/>





  <title>Javascript代码进化 | Homed Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Homed Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-search"></i> <br />
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/05/js_gf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HOMED">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Homed Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Javascript代码进化</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-05T00:00:00+08:00">
                2016-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/前端技术/" itemprop="url" rel="index">
                    <span itemprop="name">前端技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>众所周知，JS是一种语法极其灵活的语言，一千个人会有一千种JS书写方式。这造成的结果往往就是给项目日后的开发及维护留下一个不小的隐患，也对你和团队再次开发及阅读代码造成一定困难，个人认为良好的书写规范是应该首当其冲的。所以参考一些优秀前端开发团队的代码规范后，总结了几点，希望能让你的Javascript代码上升一个台阶。</p>
<p><strong>变量命名：</strong><br>变量名包括全局变量，局部变量，类变量，函数参数等等，他们都属于这一类。<br>变量命名都以类型前缀+有意义的单词组成，用驼峰式命名法增加变量和函式的可读性。例如：sUserName，nCount。</p>
<a id="more"></a>
<p><strong>前缀规范：</strong><br>每个局部变量都需要有一个类型前缀，按照类型可以分为：</p>
<pre><code>s：表示字符串。例如：sName，sHtml；
n：表示数字。例如：nPage，nTotal；
b：表示逻辑。例如：bChecked，bHasLogin；
a：表示数组。例如：aList，aGroup；
r：表示正则表达式。例如：rDomain，rEmail；
f：表示函数。例如：fGetHtml，fInit；
o：表示以上未涉及到的其他对象，例如：oButton，oDate；
g：表示全局变量，例如：gUserName，gLoginTime；
</code></pre><p>当然，也可以根据团队及项目需要增加前缀规范，例如我们团队会用到：<br>$：表示Jquery对象。例如：$Content，$Module；<br>一种比较广泛的Jquery对象变量命名规范。<br>j：表示Jquery对象。例如：jContent， jModule；<br>另一种Jquery对象变量命名方式。<br>fn：表示函数。例如：fnGetName，fnSetAge；<br>和上面函数的前缀略有不同，改用fn来代替，个人认为fn能够更好的区分普通变量和函数变量。<br>dom：表示Dom对象，例如：domForm，domInput；<br>项目中很多地方会用到原生的Dom方法及属性，可以根据团队需要适当修改。</p>
<p>这里可以根据项目及团队需要，设计出针对项目需要的前缀规范，从而达到团队开发协作便利的目的。<br>例外情况：<br>1：作用域不大临时变量可以简写，比如：str，num，bol，obj，fun，arr。<br>2：循环变量可以简写，比如：i，j，k等。<br>3：某些作为不允许修改值的变量认为是常量，全部字母都大写。例如：COPYRIGHT，PI。常量可以存在于函数中，也可以存在于全局。</p>
<p>为什么需要这样强制定义变量前缀？正式因为javascript是弱语言造成的。在定义大量变量的时候，我们需要很明确的知道当前变量是什么属性，如果只通过普通单词，是很难区分的。<br>//普通代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var checked = false;</div><div class="line">var check = function() &#123;</div><div class="line">    return true;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">some code</div><div class="line">**/</div><div class="line"> </div><div class="line">if(check) &#123;//已经无法很确切知道这里是要用checked还是check()从而导致逻辑错误</div><div class="line">    //do some thing</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>//规范后代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var bChecked = false;</div><div class="line">var fnCheck = function() &#123;</div><div class="line">    return true;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">some code</div><div class="line">**/</div><div class="line"> </div><div class="line">if(bChecked) &#123;</div><div class="line">    // do some thing</div><div class="line">&#125;</div><div class="line">if(fnCheck()) &#123;</div><div class="line">    // do other thing</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>函数命名：</strong><br>统一使用动词或者动词+名词形式，例如：fnGetVersion()，fnSubmitForm()，fnInit()；涉及返回逻辑值的函数可以使用is，has，contains等表示逻辑的词语代替动词，例如：fnIsObject()，fnHasClass()，fnContainsElment()。<br>如果有内部函数，使用_fn+动词+名词形式，内部函数必需在函数最后定义。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function fnGetNumber(nTotal) &#123;</div><div class="line">    if (nTotal &lt; 100) &#123;</div><div class="line">        nTotal = 100;</div><div class="line">    &#125;</div><div class="line">    return _fnAdd(nTotal);</div><div class="line"> </div><div class="line">    function _fnAdd(nNumber) &#123;</div><div class="line">        nNumber++;</div><div class="line">        return nNumber;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">alert(fGetNumber(10)); //alert 101</div></pre></td></tr></table></figure>
<p><strong>对象方法与事件响应函数：</strong><br>对象方法命名使用fn+对象类名+动词+名词形式；例如 fnAddressGetEmail()，主观觉得加上对象类名略有些鸡肋，个人认为一个对象公开的属性与方法应该做到简洁易读。多增加一个对象类名单词，看着统一了，但有点为了规范而规范的味道，这里根据自身喜好仁者见仁智者见智吧。</p>
<p>某事件响应函数命名方式为fn+触发事件对象名+事件名或者模块名，例如：fnDivClick()，fnAddressSubmitButtonClick()</p>
<p>补充一些函数方法常用的动词：</p>
<pre><code>get 获取/set 设置,add 增加/remove 删除
create 创建/destory 移除start 启动/stop 停止
open 打开/close 关闭,read 读取/write 写入
load 载入/save 保存,create 创建/destroy 销毁
begin 开始/end 结束,backup 备份/restore 恢复
import 导入/export 导出,split 分割/merge 合并
inject 注入/extract 提取,attach 附着/detach 脱离
bind 绑定/separate 分离,view 查看/browse 浏览
edit 编辑/modify 修改,select 选取/mark 标记
copy 复制/paste 粘贴,undo 撤销/redo 重做
insert 插入/delete 移除,add 加入/append 添加
clean 清理/clear 清除,index 索引/sort 排序
find 查找/search 搜索,increase 增加/decrease 减少
play 播放/pause 暂停,launch 启动/run 运行
compile 编译/execute 执行,debug 调试/trace 跟踪
observe 观察/listen 监听,build 构建/publish 发布
input 输入/output 输出,encode 编码/decode 解码
encrypt 加密/decrypt 解密,compress 压缩/decompress 解压缩
pack 打包/unpack 解包,parse 解析/emit 生成
connect 连接/disconnect 断开,send 发送/receive 接收
download 下载/upload 上传,refresh 刷新/synchronize 同步
update 更新/revert 复原,lock 锁定/unlock 解锁
check out 签出/check in 签入,submit 提交/commit 交付
push 推/pull 拉,expand 展开/collapse 折叠
begin 起始/end 结束,start 开始/finish 完成
enter 进入/exit 退出,abort 放弃/quit 离开
obsolete 废弃/depreciate 废旧,collect 收集/aggregate 聚集
</code></pre><p>上面讨论了基本的JS书写命名规范，按我个人看法，只要能够按照上面的规范写出来的代码，一般不会太糟糕，最不济没人会说你代码乱的难以阅读。代码规范对于大团队的维护建设是毋庸置疑的，当然对于个人的代码素养也是很有帮助的，希望你能够通过上文能够加强你的代码规范，写出易读易维护的代码。</p>
<p>代码的规范属于战术上的进化，下面我们再来看看如何让你的Javascript在战略上进化。</p>
<p>面向对象书写Javascript<br>面向对象书写Javascript想必你一定不会陌生，但我敢说，大多数前端一般不会通过面向对象来书写JS代码。第一是Javascript本身的语言机制原因造成面向对象的书写困难，由于Javascript是原型式继承又是一个类C的语言，他的面向对象的东西相对于C++/Java比较奇怪。第二是Javascript作为一种语法极其灵活的语言，直接导致了面向对象书写JS又有多种写法，让许多初学者分不清到底哪个才是正确的写法。基于上述和个人的经验推荐如下俩种书写方式：</p>
<p>第一类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    function Circle(nRadius)&#123;</div><div class="line">        this.nR = nRadius;</div><div class="line">    &#125;</div><div class="line">    Circle.prototype = &#123;</div><div class="line">        PI : 3.14,</div><div class="line">        fnGetArea : function()&#123;</div><div class="line">            return this.PI * this.nR * this.nR;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    var c1 = new Circle(5);</div><div class="line">    alert(c1.fnGetArea()); //78.5</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>上面这种可以说是很标准的面向对象JS书写方式了我们又称之为工厂模式，优点就是简单容易上手，新手常常喜欢这么写。以上代码略微做些改动，会有如下这个变种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    function Circle(nRadius, sMessage)&#123;</div><div class="line">        this.init.apply(this, arguments);</div><div class="line">    &#125;</div><div class="line">    Circle.prototype = &#123;</div><div class="line">        init : function(nRadius, sMessage)&#123;</div><div class="line">            this.nR = nRadius;</div><div class="line">            this.sMessage = sMessage;</div><div class="line">        &#125;,</div><div class="line">        PI : 3.14,</div><div class="line">        fnGetArea : function()&#123;</div><div class="line">            return this.sMessage + &quot;: &quot; + this.PI * this.nR * this.nR;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    var c = new Circle(5, &quot;构造初始化 面积&quot;);</div><div class="line">    alert(c.fnGetArea()); //构造初始化 面积: 78.5</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>上面这个变种，就比较有意思了，this.init.apply(this, arguments);这行代码把初始化的任务交接给了init()方法，这么做的好处就是可以把所有初始化的东西都放在一个地方进行，增加可阅读性，需要理解一定的Javascript运行机制原理。</p>
<p>第二类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    function Circle()&#123;</div><div class="line">    &#125;</div><div class="line">    Circle.prototype = &#123;</div><div class="line">        init : function(nRadius, sMessage)&#123;</div><div class="line">            this.nR = nRadius;</div><div class="line">            this.sMessage = sMessage;</div><div class="line">        &#125;,</div><div class="line">        PI : 3.14,</div><div class="line">        fnGetArea : function()&#123;</div><div class="line">            return this.sMessage + &quot;: &quot; + this.PI * this.nR * this.nR;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    var c = new Circle();</div><div class="line">    c.init(5, &quot;手动构造初始化 面积&quot;);</div><div class="line">    alert(c.fnGetArea()); //手动构造初始化 面积: 78.5</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>这类写法是我现在比较喜欢的写法，简洁高效。从书写角度来看省去了构造函数初始化属性，改用其init()中初始化。另一个好处在于不在new Circle()构造之初传入参数，个人认为当new构造对象的时候，最好不要掺杂参数，这样做很“危险”，改为“手动型”初始化更易于代码排查修改。当然这种写法还有一个原因就是他可以很好的转换成一般前端接受的“封装型”代码，我们把上面的代码也略微改动一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    var Circle = &#123;</div><div class="line">        init : function(nRadius, sMessage)&#123;</div><div class="line">            this.nR = nRadius;</div><div class="line">            this.sMessage = sMessage;</div><div class="line">        &#125;,</div><div class="line">        PI : 3.14,</div><div class="line">        fnGetArea : function()&#123;</div><div class="line">            return this.sMessage + &quot;: &quot; + this.PI * this.nR * this.nR;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    Circle.init(5, &quot;封装型 面积&quot;);</div><div class="line">    alert(Circle.fnGetArea()); //封装型 面积: 78.5</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>是不是对上面这类代码很熟悉，很多网站上的例子都是使用这类封装型代码书写的，优点是代码的封装性良好，可以有效的重用，多用于页面功能性效果实现，封装一个Tab控件、封装一个跑马灯效果等等。缺点就是不能很好的用作继承，这是和上面三种格式最大区别。可话又说回来一般JS代码很少会用到继承的地方，除非是写一个大型库（类似YUI）会用到继承外，一般写一个功能模块用到封装型代码就够用了，所以大多数前端喜欢使用这类封装型的书写风格。</p>
<p>上面介绍了2类4种面向对象的写法，一般面向对象书写格式基本都在上面了，熟悉面向对象书写可以有效的增加你对JS的理解。熟练使用上面4中写法也能够很好的在工作中给代码维护修改带来便利。最后我们再来谈一个技巧，让你的Javascript代码在技巧上进化。</p>
<p>用对象字面量构造对象<br>一个对象字面量就是包含在一对花括号中的0个或多个“名/值”对。上文在面向对象书写格式的时候我们就大量的使用了对象字面量的书写格式。<br>对象字面量书写Javascript可以很好的简化代码，又能极大的增加代码可读性，尤其作为参数使用可以有化腐朽为神奇的表现。我们看下面代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    function Person(sName, nAge, nWeight, bSingle)&#123;</div><div class="line">        this.sName = sName;</div><div class="line">        this.nAge = nAge;</div><div class="line">        this.nWeight = nWeight;</div><div class="line">        this.bSingle = bSingle;</div><div class="line">    &#125;</div><div class="line">    Person.prototype.showInfo = function()&#123;</div><div class="line">        return this.sName + &quot; &quot; + this.nAge + &quot; &quot; + this.nWeight + &quot; &quot; + this.bSingle;</div><div class="line">    &#125;</div><div class="line">    var p = new Person(&quot;海玉&quot;, 25, 75, true);</div><div class="line">    alert(p.showInfo()); //海玉 25 75 true</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>上面是一个很标准的工厂模式，一般而言这类写法属于那种规规矩矩没有大错也没有亮点的代码，而且参数不少，一个不小心还会传入错误的参数，而应用对象字面量技巧可以很好的规避此类问题，我们来看改动过后的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">    function Person()&#123;</div><div class="line">    &#125;</div><div class="line">    Person.prototype = &#123;</div><div class="line">        init : function(option)&#123;</div><div class="line">            if(typeof option == &quot;undefined&quot;)&#123;</div><div class="line">                option = &#123;&#125;;</div><div class="line">            &#125;</div><div class="line">            this.sName = option.sName || &quot;海玉&quot;;</div><div class="line">            this.nAge = option.nAge || 25;</div><div class="line">            this.nWeight = option.nWeight || 75;</div><div class="line">            this.bSingle = (typeof option.bSingle != &quot;undefined&quot;) ? option.bSingle : true;</div><div class="line">        &#125;,</div><div class="line">        showInfo : function()&#123;</div><div class="line">            return this.sName + &quot; &quot; + this.nAge + &quot; &quot; + this.nWeight + &quot; &quot; + this.bSingle;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    var p = new Person();</div><div class="line">    p.init(&#123;</div><div class="line">        nWeight : 80,</div><div class="line">        sName : &quot;Hank&quot;</div><div class="line">    &#125;)</div><div class="line">    alert(p.showInfo()); //Hank 25 80 true</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>这里使用第三种面向对象写法，有兴趣的朋友可以自行尝试改成封装型写法。上面的改写看出哪里改动最大吗？对的，传入参数改成了一个对象字面量，而且传入参数可以是随意设置，位置颠倒也不会有任何问题。这里充分利用对象字面量优点，利用键值对代替原始的传参方式大大提升了可读性和容错性。还有一个改进就是默认值的处理，如果没有传入任何参数，此代码也能很好的运行下去，不会有任何问题。</p>
<p>注1：这里形参命名为option，没有遵守上面的变量命名规范是为了方便书写与阅读，具体情况具体分析。</p>
<p>注2：由于||运算符对于布尔值默认赋值会出现赋值问题，所以要先进行判断是否为undefined，再利用三元运算符可以很好的完成布尔值的默认值赋值。</p>
<p>总的来说上面阐述的代码进化只能算的上是“修身”层面，想要真正的让代码“修心”还是得多写，多看，多练。只有这样你的代码才会更精练，更有扩展性，更好的维护性。</p>
<p>林林总总写了这些个总结，一来是对自己学习的记录，二来也是想同大家探讨JS还有哪些地方有潜力可挖，脑子里还有许多零零碎碎的片段，待日后再次整理验证再与大家一起分享吧。</p>
<p>转自海玉博客：</p>
<blockquote>
<p><a href="http://www.hicss.net/evolve-your-javascript-code/" target="_blank" rel="external">http://www.hicss.net/evolve-your-javascript-code/</a></p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/javascript/" rel="tag"># javascript</a>
          
            <a href="/tags/jQuery/" rel="tag"># jQuery</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/02/20/jq_deferred/" rel="next" title="jQuery的deferred对象详解">
                <i class="fa fa-chevron-left"></i> jQuery的deferred对象详解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/03/20/css_hd/" rel="prev" title="基于CSS3做的H5活动页面（一）">
                基于CSS3做的H5活动页面（一） <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="HOMED" />
            
              <p class="site-author-name" itemprop="name">HOMED</p>
              <p class="site-description motion-element" itemprop="description">热爱生活 热爱前端  技术改变生活</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/homedliu" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HOMED</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  
  

  

  

  

</body>
</html>
